<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../CSS/Exchange.css">
</head>

<body>
    <div class="books">
        <div class="book">
            <div class="img 1"><img src=../IMAGES/aa.jpg alt="img" /></div>
            <div>
                <table>
                    <tr>
                        <td><strong> Book Name:</strong></td>
                        <td id="bookname"> </td>
                    </tr>
                    <tr>
                        <td><strong> Book Author:</strong></td>
                        <td id="bookauthor"></td>
                    </tr>
                    <tr>
                        <td><strong> Book Publication:</strong></td>
                        <td id="bookpublication"></td>
                    </tr>
                    <tr>
                        <td><strong> Book Language:</strong></td>
                        <td id="booklanguage"></td>
                    </tr>
                    <tr>
                        <td><strong> Book Volume:</strong></td>
                        <td id="bookvolume"></td>
                    </tr>
                    <tr>
                        <td><strong>Book Price:</strong></td>
                        <td id="bookprice"></td>
                    </tr>
                 <tr>
                        <td><strong> Book details:</strong></td>
                        <td id="bookdetail"></td>
                    </tr> 

                </table>


            </div>

        </div>

            <h1> Uploaded By User</h1>
            <div class="user-details">

                   
            <div class="img"><img src=../IMAGES/aa.jpg alt="image"></div>
            <div class="user-inform">
                <strong> Name: </strong><span id="name"></span><br><br>
                <strong> Mobile: </strong><span id="mobile"></span><br><br>
                <strong> Email: </strong><span id="email"></span><br><br>
                <strong> Address: </strong><span id="address"></span><br><br>
<a href="./comment.html"><button>Send Message</button></a>
            </div>
            
        </div>
        </div>
   
    <script>
        const backendURL = "https://bookweb-backend-vu2o.onrender.com";
window.addEventListener("DOMContentLoaded", async () => {
        try {
            // 1. URL se Book ID nikalo (Jo Index page ne bheji thi)
            const params = new URLSearchParams(window.location.search);
            const bookId = params.get('id');

            // Agar ID nahi mili to user ko batao
            if (!bookId) {
                document.body.innerHTML = "<h2 style='text-align:center; margin-top:50px;'>❌ Error: No book selected. Go back to Home Page.</h2>";
                return;
            }

            // 2. Database se data maango
            const response = await fetch(backendURL + "/books");
            const books = await response.json();

            // 3. ✅ MAIN CHANGE: Sirf wahi book dhoondo jiski ID match kare
            // Purana code: const data = books[0]; (Ye galat tha)
            const data = books.find(book => book._id === bookId);

            // Agar database me wo book nahi mili
            if (!data) {
                document.body.innerHTML = "<h2 style='text-align:center;'>❌ Book not found!</h2>";
                return;
            }
    

    document.getElementById("bookname").innerText = data.bookname;
    document.getElementById("bookauthor").innerText = data.bookauthor;
    document.getElementById("bookpublication").innerText = data.bookpublication;
    document.getElementById("booklanguage").innerText = data.booklanguage;
    document.getElementById("bookvolume").innerText = data.bookvolume;
    document.getElementById("bookprice").innerText = "Rs. " + data.bookprice;
   // document.getElementById("bookdetails").innerText = data.details;

    document.getElementById("name").innerText = data.user.name;
    document.getElementById("mobile").innerText = data.user.mobile;
    document.getElementById("email").innerText = data.user.email;
    document.getElementById("address").innerText = data.user.address;
}
});
</script>

        
        
</body>

</html>
