<!DOCTYPE html>
<html lang="en">

<head>
    <title>
        Sign-Up form with HTML and CSS
    </title>
    <link rel="stylesheet" href="../CSS/login.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
        integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>
    <div class="navbar">
    <div class="nav-left">
        <label class="checkbtn" id="menu-toggle">
            <i class="fas fa-bars"></i>
        </label>
        <label class="logo">BOOK WEB</label>
    </div>

    <ul id="menu-list">
        <li><a href="../index.html">Home</a></li>
        <li><a href="../HTML/help.html">Help</a></li>
        <li><a href="">My Books</a></li>
        <li><a href="../HTML/about us.html">About Us</a></li>
        <li><a href="../HTML/contact us.html">Contact Us</a></li>
    </ul>

    <div class="navbar-right">
        <a href=""><i class="fa-solid fa-magnifying-glass"></i></a>
        <a href="./home.html"><i class="fa-solid fa-circle-user"></i></a>
    </div>
</div>





    <div class="container">
        <form class="login-box">
            <h2>Login Here</h2>
            <input type="text" placeholder="Username" required />
            <input type="Password" placeholder="Password" required />

        <!--    <a href="./home.html"><button type="button">Login</button></a> -->
            <button type="button">loin</button>

        </form>
    </div>
    </nav>
    <script>
        document.getElementById("menu-toggle").addEventListener("click", function () {
            document.getElementById("menu-list").classList.toggle("show");
        });
         // üëá Apna backend URL (Render ka)
    const backendURL = "https://bookweb-backend-vu2o.onrender.com";

    document.getElementById("loginForm").addEventListener("submit", async function (e) {
      e.preventDefault();

      const mobile = document.getElementById("mobile").value;
      const password = document.getElementById("password").value;

      try {
        const response = await fetch(backendURL + "/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ mobileno: mobile, password })
        });

        let data = {};
        try {
          data = await response.json();
        } catch (err) {
          data = {};
        }

        const message = data.message || (response.ok ? "‚úÖ Login successful" : "‚ùå Invalid login");

        if (!response.ok) {
          document.getElementById("result").innerText = "‚ùå " + message;
          return;
        }

        document.getElementById("result").innerText = "‚úÖ " + message;

        // ‚úÖ Login success hone ke baad home page par redirect
        setTimeout(() => {
          window.location.href = "index.html";
        }, 1500);

      } catch (err) {
        document.getElementById("result").innerText = "‚ùå Network/Error: " + err.message;
      }
    });
    </script>

</body>

</html>
